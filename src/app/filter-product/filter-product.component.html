<div class="filter-container d-flex flex-column p-4" style="height: 100%;">

    <!-- Header -->
    <div class="search-header d-flex justify-content-between align-items-center">
        <h5 class="search-text fw-bold">Filter</h5>
        <button mat-button class="custom-close-button" (click)="closeForm()">
            <i class="fa-solid fa-xmark" style="font-size: 23px;"></i>
        </button>
    </div>

    <hr />

    <!-- Sort By -->
    <div class="sort-section mb-4">
        <h6 class="fw-bold">Sort by</h6>
        <div class="form-check" *ngFor="let option of sortOptions">
            <input style="cursor: pointer;" class="form-check-input" type="radio" [id]="option.value" name="sortOption"
                [value]="option.value" [(ngModel)]="selectedSort">
            <label style="cursor: pointer;" class="form-check-label" [for]="option.value">{{ option.label }}</label>
        </div>
    </div>

    <div class="col-md-12 mb-4">
        <h6 class="fw-bold">Price Range</h6>
        <div class="text-center mb-2">
            {{ filterStartPrice }}$ - {{ filterEndPrice }}$
        </div>

        <input type="range" class="form-range w-100" [(ngModel)]="filterStartPrice" [min]="0" [max]="filterEndPrice" />
        <input type="range" class="form-range w-100" [(ngModel)]="filterEndPrice" [min]="filterStartPrice"
            [max]="1900" />

        <div class="d-flex justify-content-between mt-2">
            <span>{{ filterStartPrice }}$</span>
            <span>{{ filterEndPrice }}$</span>
        </div>
    </div>


    <!-- Size Selection -->
    <div class="size-section mb-4">
        <h5 class="fw-bold">Size</h5>
        <div class="d-grid gap-2" style="grid-template-columns: repeat(3, 1fr);">
            <button type="button" class="btn btn-outline-secondary" *ngFor="let size of dataSize"
                [class.active]="selectedSizes.includes(size.id)" (click)="toggleSize(size)"
                [ngClass]="{ 'active': selectedSizes.includes(size.id) }">
                {{ size.value }}
            </button>
        </div>
    </div>

    <!-- Color Selection -->
    <div class="size-section mb-4">
        <h5 class="fw-bold">Color</h5>
        <div class="d-grid gap-2" style="grid-template-columns: repeat(3, 1fr);">
            <button type="button" class="btn btn-outline-secondary d-flex align-items-center"
                *ngFor="let color of dataColor" [class.active]="selectedSizes.includes(color.id)"
                (click)="toggleSize(color)" [ngClass]="{ 'active': selectedSizes.includes(color.id) }">
                <div [style.background]="color.value" style="width: 12px; height: 10px;" class="me-1"></div>
                {{ color.value }}
            </button>
        </div>
    </div>

    <!-- Sticky Footer Buttons -->
    <div class="mt-auto pt-3 d-flex justify-content-between">
        <button class="btn btn-light flex-grow-1 me-2" (click)="clearFilters()">Clear</button>
        <button class="btn btn-dark flex-grow-1 ms-2" (click)="applyFilters()">Apply</button>
    </div>
</div>